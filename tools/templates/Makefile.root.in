##########################################################################

#Global setup variables
PREFIX=@PREFIX@
SUBPREFIX=@SUBPREFIX@
PROJECT_SOURCE_DIR=@PROJECT_SOURCE_DIR@

#Global targets
all: install-generic-subprefix
install-all : @SUBPREFIX@

#final install to make generic
install-generic-subprefix: install-all
	mkdir -p $(PREFIX)/generic/bin
	for exe in "$(PREFIX)/`uname -m`/mpcframework/bin/"*; do ln -sf $(PREFIX)/generic/bin/arch_wrapper $(PREFIX)/generic/bin/`basename "$$exe"`; done
	cp $(PROJECT_SOURCE_DIR)/tools/arch_wrapper $(PREFIX)/generic/bin/

.PHONY: all install-all install-generic-subprefix
