##########################################################################

#Global setup variables
PREFIX=@PREFIX@
SUBPREFIXES=@SUBPREFIXES@
PROJECT_SOURCE_DIR=@PROJECT_SOURCE_DIR@

#Global targets
all: install-generic-subprefix
install-all : @SUBPREFIXES@

#final install to make generic
install-generic-subprefix: install-all
	mkdir -p $(PREFIX)/generic/bin
	for exe in $(PREFIX)/host/bin/*; do if [ ! "${exe}" = "arch_wrapper" ]; then ln -sf $(PREFIX)/generic/bin/arch_wrapper $(PREFIX)/generic/bin/`basename "$$exe"`; fi; done
	cp $(PROJECT_SOURCE_DIR)/tools/arch_wrapper $(PREFIX)/generic/bin/

.PHONY: all install-all install-generic-subprefix
