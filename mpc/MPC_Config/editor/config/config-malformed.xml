<?xml version='1.0'?>
<mpc xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="mpc-config.xsd">
	<profiles>
		<profile>
			<name>default</name>
			<modules>
				<allocator>
					<numa_migration>false</numa_migration>
					<realloc_factor>2</realloc_factor>
					<realloc_threashold>50 MB</realloc_threashold>
					<numa>true</numa>
					<strict>false</strict>
					<keep_mem>500 MB</keep_mem>
					<keep_max>8 MB</keep_max>
				</allocator>
				<launcher>
					<verbosity>0</verbosity>
					<banner>true</banner>
					<autokill>300</autokill>
					<user_launchers>default</user_launchers>
					<keep_rand_addr>true</keep_rand_addr>
					<disable_rand_addr>false</disable_rand_addr>
					<disable_mpc>false</disable_mpc>
					<thread_init>sctk_use_ethread_mxn</thread_init>
					<nb_task>1</nb_task>
					<nb_process>1</nb_process>
					<nb_processor>0</nb_processor>
					<nb_node>0</nb_node>
					<launcher>none</launcher>
					<max_try>10</max_try>
					<vers_details>false</vers_details>
					<profiling>none</profiling>
					<enable_smt>false</enable_smt>
					<share_node>false</share_node>
					<restart>false</restart>
					<checkpoint>false</checkpoint>
					<migration>false</migration>
					<report>false</report>
				</launcher>
				<debugger>
					<colors>true</colors>
					<max_filename_size>1024</max_filename_size>
				</debugger>
				<inter_thread_comm>
					<barrier_arity>8</barrier_arity>
					<broadcast_arity_max>32</broadcast_arity_max>
					<broadcast_max_size>1024</broadcast_max_size>
					<broadcast_check_threshold>512</broadcast_check_threshold>
					<allreduce_arity_max>8</allreduce_arity_max>
					<allreduce_max_size>1024</allreduce_max_size>
					<allreduce_check_threshold>8192</allreduce_check_threshold>
                    <collectives_init_hook>sctk_collectives_init_opt_messages</collectives_init_hook>
				</inter_thread_comm>
				<low_level_comm>
					<checksum>true</checksum>
					<send_msg>sctk_network_send_message_default</send_msg>
					<notify_recv_msg>sctk_network_notify_recv_message_default</notify_recv_msg>
					<notify_matching_msg>sctk_network_notify_matching_message_default</notify_matching_msg>
					<notify_perform_msg>sctk_network_notify_perform_message_default</notify_perform_msg>
					<notify_idle_msg>sctk_network_notify_idle_message_default</notify_idle_msg>
					<notify_any_src_msg>sctk_network_notify_any_source_message_default</notify_any_src_msg>
					<network_mode>default</network_mode>
					<dyn_reordering>false</dyn_reordering>
				</low_level_comm>
				<mpc>
					<log_debug>false</log_debug>
					<hard_checking>false</hard_checking>
					<buffering>false</buffering>
				</mpc>
				<openmp>
					<vp>0</vp>
					<schedule>static</schedule>
					<nb_threads>0</nb_threads>
					<adjustment>false</adjustment>
					<nested>false</nested>
					<max_threads>64</max_threads>
					<max_alive_for_dyn>7</max_alive_for_dyn>
					<max_alive_for_guided>3</max_alive_for_guided>
					<max_alive_sections>3</max_alive_sections>
					<max_alive_single>3</max_alive_single>
				</openmp>
				<profiler>
					<file_prefix>mpc_profile</file_prefix>
					<append_date>true</append_date>
					<color_stdout>true</color_stdout>
					<level_colors>
						<level>#3A4D85</level>
						<level>#82A2FF</level>
						<level>#B8BDCB</level>
						<level>#5D6782</level>
						<level>#838383</level>
						<level>#5A5757</level>
					</level_colors>
				</profiler>
				<thread>
					<spin_delay>10</spin_delay>
					<interval>10</interval>
					<kthread_stack_size>10 MB</kthread_stack_size>
				</thread>
			</modules>
			<networks>
				<configs>
					<config>
						<name>ib_config_mpi</name>
						<driver>
						<infiniband>
							<network_type>1</network_type>
							<adm_port>1</adm_port>
							<verbose_level>0</verbose_level>
							<eager_limit>12288</eager_limit>
							<buffered_limit>262114</buffered_limit>
							<qp_tx_depth>15000</qp_tx_depth>
							<qp_rx_depth>0</qp_rx_depth>
							<cq_depth>40000</cq_depth>
							<max_sg_sq>4</max_sg_sq>
							<max_sg_rq>4</max_sg_rq>
							<max_inline>128</max_inline>
							<rdma_resizing>0</rdma_resizing>
							<max_rdma_connections>0</max_rdma_connections>
							<max_rdma_resizing>0</max_rdma_resizing>
							<init_ibufs>1000</init_ibufs>
							<max_srq_ibufs_posted>1500</max_srq_ibufs_posted>
							<max_srq_ibufs>1000</max_srq_ibufs>
							<srq_credit_limit>500</srq_credit_limit>
							<srq_credit_thread_limit>100</srq_credit_thread_limit>
							<size_ibufs_chunk>2000</size_ibufs_chunk>
							<init_mr>400</init_mr>
							<size_mr_chunk>200</size_mr_chunk>
							<mmu_cache_enabled>0</mmu_cache_enabled>
							<mmu_cache_entries>200</mmu_cache_entries>
							<steal>1</steal>
							<quiet_crash>0</quiet_crash>
							<async_thread>1</async_thread>
							<wc_in_number>4</wc_in_number>
							<wc_out_number>4</wc_out_number>
							<rdma_depth>4</rdma_depth>
							<rdma_dest_depth>4</rdma_dest_depth>
							<low_memory>false</low_memory>
							<rdvz_protocol>IBV_RDVZ_WRITE_PROTOCOL</rdvz_protocol>
						</infiniband>
						</driver>
					</config>
					<config>
						<name>ib_config_signalization</name>
						<driver>
						<infiniband>
							<network_type>0</network_type>
							<adm_port>1</adm_port>
							<verbose_level>0</verbose_level>
							<eager_limit>12288</eager_limit>
							<buffered_limit>262114</buffered_limit>
							<qp_tx_depth>1000</qp_tx_depth>
							<qp_rx_depth>0</qp_rx_depth>
							<cq_depth>2000</cq_depth>
							<max_sg_sq>4</max_sg_sq>
							<max_sg_rq>4</max_sg_rq>
							<max_inline>128</max_inline>
							<rdma_resizing>0</rdma_resizing>
							<max_rdma_connections>0</max_rdma_connections>
							<max_rdma_resizing>0</max_rdma_resizing>
							<init_ibufs>100</init_ibufs>
							<max_srq_ibufs_posted>100</max_srq_ibufs_posted>
							<max_srq_ibufs>100</max_srq_ibufs>
							<srq_credit_limit>100</srq_credit_limit>
							<srq_credit_thread_limit>100</srq_credit_thread_limit>
							<size_ibufs_chunk>100</size_ibufs_chunk>
							<init_mr>10</init_mr>
							<size_mr_chunk>10</size_mr_chunk>
							<mmu_cache_enabled>0</mmu_cache_enabled>
							<mmu_cache_entries>0</mmu_cache_entries>
							<steal>0</steal>
							<quiet_crash>0</quiet_crash>
							<async_thread>1</async_thread>
							<wc_in_number>4</wc_in_number>
							<wc_out_number>4</wc_out_number>
							<rdma_depth>4</rdma_depth>
							<rdma_dest_depth>4</rdma_dest_depth>
							<low_memory>false</low_memory>
							<rdvz_protocol>IBV_RDVZ_WRITE_PROTOCOL</rdvz_protocol>
						</infiniband>
						</driver>
					</config>
					<config>
						<name>tcp_config_mpi</name>
						<driver>
						<tcp>
							<fake_param>0</fake_param>
						</tcp>
						</driver>
					</config>
					<config>
						<name>tcpoib_config_mpi</name>
						<driver>
						<tcpoib>
							<fake_param>0</fake_param>
						</tcpoib>
						</driver>
					</config>
				</configs>
				<rails>
					<rail>
						<name>ib_mpi</name>
						<device>0</device>
						<topology>ondemand</topology>
						<config>ib_config_mpi</config>
					</rail>
					<rail>
						<name>ib_signalization</name>
						<device>0</device>
						<topology>torus</topology>
						<config>ib_config_signalization</config>
					</rail>
					<rail>
						<name>tcp_mpi</name>
						<device>0</device>
						<topology>fully</topology>
						<config>tcp_config_mpi</config>
					</rail>
					<rail>
						<name>tcpoib_mpi</name>
						<device>0</device>
						<topology>fully</topology>
						<config>tcpoib_config_mpi</config>
					</rail>
				</rails>
				<cli_options>
					<cli_option>
						<name>ib</name>
						<rails>
							<rail>ib_mpi</rail>
							<rail>ib_signalization</rail>
						</rails>
					</cli_option>
					<cli_option>
						<name>tcp</name>
						<rails>
							<rail>tcp_mpi</rail>
						</rails>
					</cli_option>
					<cli_option>
						<name>tcpoib</name>
						<rails>
							<rail>tcpoib_mpi</rail>
						</rails>
					</cli_option>
					<cli_option>
						<name>multirail_tcp</name>
						<rails>
							<rail>tcp_mpi</rail>
							<rail>tcp_mpi</rail>
						</rails>
					</cli_option>
					<cli_option>
						<name>default</name>
						<rails>
							<rail>ib_mpi</rail>
							<rail>ib_signalization</rail>
						</rails>
					</cli_option>
				</cli_options>
			</networks>
		</profile>
	<mappings>
		<mapping>
			<selectors>
				<env name="MPC_DEBUG">true</env>
			</selectors>
			<profiles>
				<profile>debug</profile>
			</profiles>
		</mapping>
	</mappings>
</mpc>

